<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Customization · PrimeHub</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Helm"/><meta name="docsearch:version" content="2.0.0-rc.1"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Customization · PrimeHub"/><meta property="og:type" content="website"/><meta property="og:url" content="https://InfuseAI.github.io/primehub-site/"/><meta property="og:description" content="## Helm"/><meta property="og:image" content="https://InfuseAI.github.io/primehub-site/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://InfuseAI.github.io/primehub-site/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/primehub-site/img/PrimeHub_icon_32.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://InfuseAI.github.io/primehub-site/blog/atom.xml" title="PrimeHub Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://InfuseAI.github.io/primehub-site/blog/feed.xml" title="PrimeHub Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/primehub-site/js/scrollSpy.js"></script><link rel="stylesheet" href="/primehub-site/css/main.css"/><script src="/primehub-site/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/primehub-site/"><img class="logo" src="/primehub-site/img/PrimeHub_icon_64.png" alt="PrimeHub"/><h2 class="headerTitleWithLogo">PrimeHub</h2></a><a href="/primehub-site/versions"><h3>2.0.0-rc.1</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/primehub-site/docs/2.0.0-rc.1/introduction" target="_self">Documentation</a></li><li class=""><a href="/primehub-site/blog/" target="_self">Blog</a></li><li class=""><a href="/primehub-site/docs/2.0.0-rc.1/changelog" target="_self">Changelog</a></li><li class=""><a target="_self"></a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Design</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/introduction">Vision &amp; Mission</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/intro/features">Features</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/intro/roadmap">Roadmap</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Concept<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Design</h4><ul><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/jupyterhub-integration">Integration of PrimeHub and JupyterHub</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/crds">CRDs</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/crd-schema">CRD Structural Schema</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/customization">Customization</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/graphql">Spawner and GraphQL</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/data-model">PrimeHub Data Model</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/user-portal">User Portal</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/feature-flag">Feature Flag</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Setup &amp; Deployment<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/setup_deploy/installation">Installation &amp; Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides &amp; Manuals<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manual</h4><ul><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/guide_manual/admin_ui_man">Admin UI Manual</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/guide_manual/primehub_man">PrimeHub Manual</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guide</h4><ul><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/guide_manual/cluster_shutdown">Cluster shutdown</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/guide_manual/benchmark">Benchmark</a></li><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/guide_manual/airgap">Airgap</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tips &amp; More<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/primehub-site/docs/2.0.0-rc.1/tips/kibana-dashboard">Kibana Import / Export</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Customization</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="helm"></a><a href="#helm" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Helm</h2>
<p>PrimeHub customization is based on helm. In the core PrimeHub component, we integrate these helm charts</p>
<ul>
<li>Primehub Prerequisites</li>
<li>Keycloak</li>
<li>z2jh (zero-to-jupyterhub)</li>
<li>admin-ui</li>
<li>admin maintenance notebook</li>
</ul>
<p>The way to <a href="https://helm.sh/docs/using_helm/#customizing-the-chart-before-installing">customize helm installation</a> is to provide values in the installation command. PrimeHub provide default values to override. We use them to provide</p>
<ul>
<li>Common jupyterhub customization (e.g authenticator, spawner)</li>
<li>Default behaviors</li>
<li>Ingress settings</li>
<li>Airgap relative settings</li>
</ul>
<p>These helm values reside at <code>helm/&lt;component&gt;/*</code></p>
<h2><a class="anchor" aria-hidden="true" id="make-helm-installation-easy"></a><a href="#make-helm-installation-easy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make Helm Installation Easy</h2>
<p>In the common helm installation, it may look like the following command.</p>
<pre><code class="hljs"><span class="hljs-attr">helm</span> <span class="hljs-string">install \
  --name primehub \
  --namespace hub \
  --values value.yaml \
  modules/charts/primehub</span>
</code></pre>
<p>However, it is not convenient to issue this long command for each installation and not easy to be source-controlled as well. To solve this problem, we make use of <a href="https://github.com/roboll/helmfile">helmfile</a>. The above command would turn into the yaml file below.</p>
<pre><code class="hljs"><span class="hljs-symbol">charts:</span>
  - name: primehub-prerequisite
<span class="hljs-symbol">    namespace:</span> primehub
<span class="hljs-symbol">    chart:</span> ../..<span class="hljs-meta-keyword">/modules/</span>charts/primehub-prerequisite
<span class="hljs-symbol">    version:</span> ~<span class="hljs-number">0.1</span><span class="hljs-number">.0</span>
<span class="hljs-symbol">    values:</span>
      - values.yaml
</code></pre>
<p>and the install command would change to</p>
<pre><code class="hljs">helmfile -f primehub-prerequisite<span class="hljs-selector-class">.yaml</span>
</code></pre>
<p>In this way, we make the installation declarative and easy to run. All these helmfiles are located at <code>helm/helmfile.d</code>.</p>
<p>As more and more releases need to be installed, we also categorize these releases <a href="https://github.com/roboll/helmfile#labels-overview">by label</a>. There are two labels defined</p>
<table>
<thead>
<tr><th>Label</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>app</code></td><td>The component. (e.g. primehub, prometheus-operator, efk)</td></tr>
<tr><td><code>release</code></td><td>The individual release (e.g. keycloak, hub, admin-ui, ...)</td></tr>
</tbody>
</table>
<p>Here are the available releases</p>
<table>
<thead>
<tr><th>Release</th><th>App</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>primehub-prerequisite</td><td>primehub</td><td>CRD, RBAC, and helper resources for PrimeHub</td></tr>
<tr><td>keycloak</td><td>primehub</td><td>Keycloak. The identify service</td></tr>
<tr><td>hub</td><td>primehub</td><td>JupyterHub</td></tr>
<tr><td>admin-ui</td><td>primehub</td><td>The administration ui of PrimeHub</td></tr>
<tr><td>admin-notebook</td><td>primehub</td><td>The jupyter notebook for operations.</td></tr>
<tr><td>elasticsearch</td><td>efk</td><td>ElasticSearch</td></tr>
<tr><td>elasticsearch-curator</td><td>efk</td><td>Tool to manage ElasticSearch</td></tr>
<tr><td>fluentd-elasticsearch</td><td>efk</td><td>Fluentd. Log collector</td></tr>
<tr><td>kibana</td><td>efk</td><td>Kibana. Dashboard for Elasticsearch</td></tr>
<tr><td>prometheus-operator</td><td>prometheus-operator</td><td>Prometheus, Grafana, and Exporters</td></tr>
<tr><td>primehub-grafana-dashboard-basic</td><td>prometheus-operator</td><td>Dashboard for PrimeHub</td></tr>
<tr><td>primehub-grafana-dashboard-rook</td><td>prometheus-operator</td><td>Dashboard for rook</td></tr>
<tr><td>cert-manager</td><td>cert-manager</td><td>Certification Manager</td></tr>
<tr><td>rook-operator</td><td>rook-operator</td><td>Rook</td></tr>
</tbody>
</table>
<p>To diff, install/upgrade the helm release, we can use these commands</p>
<pre><code class="hljs">helmfile -f helm/helmfile.d -l <span class="hljs-attribute">release</span>=&lt;release&gt; diff
helmfile -f helm/helmfile.d -l <span class="hljs-attribute">release</span>=&lt;release&gt; charts
helmfile -f helm/helmfile.d -l <span class="hljs-attribute">app</span>=&lt;app&gt; diff
helmfile -f helm/helmfile.d -l <span class="hljs-attribute">app</span>=&lt;app&gt; charts
</code></pre>
<p>or these equivalent make commands</p>
<pre><code class="hljs"><span class="hljs-keyword">make</span> release-diff-<span class="hljs-symbol">&lt;release&gt;</span>
<span class="hljs-keyword">make</span> release-install-<span class="hljs-symbol">&lt;release&gt;</span>
<span class="hljs-keyword">make</span> component-diff-<span class="hljs-symbol">&lt;app&gt;</span>
<span class="hljs-keyword">make</span> component-install-<span class="hljs-symbol">&lt;app&gt;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="template-the-value"></a><a href="#template-the-value" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Template the Value</h2>
<p>Helm provides a great way to template the kubernetes resources. In the helm installation or upgrade, helm consolidates all the values to single value tree, and use it to generate the final resource yaml and apply them to cluster.</p>
<p>However, helm <a href="https://github.com/helm/helm/issues/2492">does not provide a way to template the value</a>, this is why helmfile templating comes in. Helmfile provides a way to <a href="https://github.com/roboll/helmfile#templates">template the value files by environment valuable</a>.</p>
<p>We can notice that in the <code>helm/&lt;component&gt;/*</code>, these values file have <code>.yaml.gotmpl</code> file extension. When helmfile is run, it would template these value files and output the final plain values.</p>
<p>The environment variable is from the <code>&lt;config-path&gt;/.env</code>. And the config path is searched in the following order</p>
<ul>
<li><code>~/.primehub/config/&lt;cluster name&gt;/</code>  (<cluster name> is <code>kubectl config current-context</code> )</li>
<li><code>./etc</code></li>
</ul>
<p>The helper script <code>bin/phenv</code> would find if <code>${CONFIG_PATH}/.env</code> is in the folder and determine if it is qualified as a config folder.</p>
<h2><a class="anchor" aria-hidden="true" id="configuration-files"></a><a href="#configuration-files" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration Files</h2>
<p>In the previous section, we talk about the config folder. In addition to <code>.env</code> file, the folder also contain these files and folders.</p>
<table>
<thead>
<tr><th>File</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>.env</code></td><td>The environment variables for helmfile templating</td></tr>
<tr><td><code>helm_override/*.yaml</code></td><td>The final value file to override. All customization for helm values should go here.</td></tr>
<tr><td><code>inventory.yaml</code></td><td>The ansible inventory file if any</td></tr>
<tr><td><code>cluster.yml</code></td><td>The rke configuration file if any</td></tr>
<tr><td><code>cluster-bootstrap.yml</code></td><td>The rke configuration file (for bootstrapping) if any</td></tr>
</tbody>
</table>
<p>As for the <code>.env</code>, here is a list of configurable keys.</p>
<p><strong>The Environment Variables for PrimeHub</strong></p>
<table>
<thead>
<tr><th>Environment</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td><code>PH_DOMAIN</code></td><td>parent domain name for this installation. (e.g. <code>example.com</code>)</td><td>No</td></tr>
<tr><td><code>PH_SCHEME</code></td><td>http or https</td><td>No</td></tr>
<tr><td><code>PH_PORT</code></td><td>port</td><td>Yes</td></tr>
<tr><td><code>KC_DOMAIN</code></td><td>Domain for external keycloak</td><td>Yes. default is 'id.$PH_DOMAIN'</td></tr>
<tr><td><code>KC_SCHEME</code></td><td>Scheme for external keycloak</td><td>No if KC_DOMAIN defined</td></tr>
<tr><td><code>KC_PORT</code></td><td>Port for external keycloak</td><td>Yes</td></tr>
<tr><td><code>KC_USER</code></td><td>Keycloak admin username</td><td>No</td></tr>
<tr><td><code>KC_PASSWORD</code></td><td>Keycloak admin password</td><td>No</td></tr>
<tr><td><code>KC_DB_PASSWORD</code></td><td>Keycloak DB password</td><td>Yes. default is <code>$KC_PASSWORD</code></td></tr>
<tr><td><code>KC_REALM</code></td><td>Keycloak realm to install primehub</td><td>Yes. default is <code>primehub</code></td></tr>
<tr><td><code>PH_GROUP_EVERYONE_ID</code></td><td>The group id of group <code>everyone</code>.</td><td>No. Generated by bootstrap.</td></tr>
<tr><td><code>PRIMEHUB_CONSOLE_DOCKER_USERNAME</code></td><td>image pulling user for admin-ui image</td><td>No</td></tr>
<tr><td><code>PRIMEHUB_CONSOLE_DOCKER_PASSWORD</code></td><td>image pulling password for admin-ui</td><td>No</td></tr>
<tr><td><code>ADMIN_UI_CLIENT_SECRET</code></td><td>The secret of keycloak client <code>admin-ui</code>.</td><td>No. Generated by bootstrap.</td></tr>
<tr><td><code>ADMIN_UI_GRAPHQL_SECRET_KEY</code></td><td>The secret key for graphql.</td><td>No. Generated by bootstrap.</td></tr>
<tr><td><code>HUB_CLIENT_SECRET</code></td><td>The secret of keycloak client <code>jupyterhub</code>.</td><td>No. Generated by bootstrap.</td></tr>
<tr><td><code>HUB_AUTH_STATE_CRYPTO_KEY</code></td><td>z2jh <a href="https://zero-to-jupyterhub.readthedocs.io/en/latest/reference.html#auth-state-cryptokey">auth state crypto key</a></td><td>No. Generated by bootstrap.</td></tr>
<tr><td><code>HUB_PROXY_SECRET_TOKEN</code></td><td>z2jh <a href="https://zero-to-jupyterhub.readthedocs.io/en/latest/reference.html#proxy-secrettoken">proxy secret token</a></td><td>No. Generated by bootstrap.</td></tr>
<tr><td><code>PRIMEHUB_AIRGAPPED</code></td><td>If the cluster is in airgap environment</td><td>Yes. default is <code>false</code></td></tr>
<tr><td><code>PRIMEHUB_FEATURE_USER_PORTAL</code></td><td>If the user portal is enabled</td><td>Yes. default is <code>false</code></td></tr>
<tr><td><code>PRIMEHUB_DOMAIN</code></td><td>Domain for user portal</td><td>No if <code>PRIMEHUB_FEATURE_USER_PORTAL</code> is enabled</td></tr>
<tr><td><code>PRIMEHUB_SCHEME</code></td><td>Scheme for user portal</td><td>No if <code>PRIMEHUB_FEATURE_USER_PORTAL</code> is enabled</td></tr>
<tr><td><code>PRIMEHUB_PORT</code></td><td>Port for user portal</td><td>Yes</td></tr>
</tbody>
</table>
<p><strong>The Environment Variables for Grafana</strong></p>
<table>
<thead>
<tr><th>Environment</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td><code>GRAFANA_SCHEME</code></td><td>The url scheme of grafana</td><td>Yes. default is <code>$PH_SCHEME</code></td></tr>
<tr><td><code>GRAFANA_DOMAIN</code></td><td>The url domain of grafana</td><td>No</td></tr>
<tr><td><code>GRAFANA_KEYCLOAK_PROXY_CLIENT_SECRET</code></td><td>The secret of keycloak client <code>grafana-proxy</code></td><td>No</td></tr>
</tbody>
</table>
<p><strong>The Environment Variables for Kibana</strong></p>
<table>
<thead>
<tr><th>Environment</th><th>Description</th><th>Optional</th></tr>
</thead>
<tbody>
<tr><td><code>KIBANA_KEYCLOAK_PROXY_CLIENT_SECRET</code></td><td>The secret of keycloak client <code>kibana-proxy</code></td><td>No</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="features-and-feature-toggle"></a><a href="#features-and-feature-toggle" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Features and Feature Toggle</h2>
<p>Please see <a href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/feature-flag">Feature Flag</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/crd-schema"><span class="arrow-prev">← </span><span>CRD Structural Schema</span></a><a class="docs-next button" href="/primehub-site/docs/2.0.0-rc.1/concepts/designs/graphql"><span class="function-name-prevnext">Spawner and GraphQL</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#helm">Helm</a></li><li><a href="#make-helm-installation-easy">Make Helm Installation Easy</a></li><li><a href="#template-the-value">Template the Value</a></li><li><a href="#configuration-files">Configuration Files</a></li><li><a href="#features-and-feature-toggle">Features and Feature Toggle</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/primehub-site/" class="nav-home"><img src="/primehub-site/img/PrimeHub_icon_128.png" alt="PrimeHub" width="66" height="58"/></a><div><h5>Docs</h5><a href="/primehub-site/docs/setup_deploy/installation.html">Setup &amp; Deployment</a><a href="/primehub-site/docs/tips/kibana-dashboard.html">Tips &amp; More</a></div><div><h5>Community</h5><a href="https://github.com/InfuseAI/primehub">PrimeHub CE</a></div><div><h5>More</h5><a href="/primehub-site/blog">Blog</a><a href="https://infuseai.io">About InfuseAI</a></div></section><section class="copyright">Copyright © 2019 InfuseAI</section></footer></div></body></html>