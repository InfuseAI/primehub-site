<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using PrimeHub from Training to Serving the Model · PrimeHub</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Using PrimeHub from Training to Serving the Model"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Using PrimeHub from Training to Serving the Model · PrimeHub"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.primehub.io/"/><meta property="og:description" content="Using PrimeHub from Training to Serving the Model"/><meta property="og:image" content="https://docs.primehub.io/img/primehub_icon.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.primehub.io/img/primehub_icon.svg"/><link rel="shortcut icon" href="/img/PrimeHub_icon_32.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-123266454-3"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-123266454-3');
            </script><link rel="stylesheet" href="/css/code-block-buttons.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald|Lato:400,400i,700"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/PrimeHub_icon_64.png" alt="PrimeHub"/><h2 class="headerTitleWithLogo">PrimeHub</h2></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/introduction" target="_self">Documentation</a></li><li class=""><a href="/docs/next/index-zh" target="_self">繁中文件</a></li><li class=""><a href="https://cse.google.com/cse?cx=a1b608e4a3908f544" target="_blank">Search ⇗</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Tutorials</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/next/concept">Concept</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/nb-data-store">Persistence</a></li><li class="navListItem"><a class="navItem" href="/docs/next/resources-quota">Resources Quota</a></li><li class="navListItem"><a class="navItem" href="/docs/next/roles">Permission</a></li><li class="navListItem"><a class="navItem" href="/docs/next/environment-variables">Environment Variables</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/login-portal-user">User Portal</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tutorials</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/next/primehub-app-tutorial-end-to-end">Using PrimeHub from Training to Serving the Model</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Installation<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/dev-introduction">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Setup Kubernetes</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/prerequisites">Prerequisites</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/kubernetes_on_gke">Kubernetes on GKE</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/kubernetes_on_eks">Kubernetes on AWS EKS</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Setup PrimeHub Community</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/install_primehub_ce">Install PrimeHub CE</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/kubernetes_on_ubuntu_ce">Install PrimeHub CE on Single Node</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Setup PrimeHub Enterprise</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/install_primehub">Install PrimeHub EE</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/kubernetes_on_ubuntu_machine">Install PrimeHub EE on Single Node</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Upgrade</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/upgrade-ce2ee">From CE to EE</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">QuickStart<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/qs-primehub">PrimeHub CE/EE</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/qs-primehub-deploy">PrimeHub Deploy</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Notebooks<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/launch-project">Start Notebook</a></li><li class="navListItem"><a class="navItem" href="/docs/next/user-advanced-setting">Advanced Settings</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/ssh-config">SSH Server Feature</a></li><li class="navListItem"><a class="navItem" href="/docs/next/notebook-tips">Tips</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Notebook Extension</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/ph-notebook-extension">PrimeHub Extension</a></li><li class="navListItem"><a class="navItem" href="/docs/next/notebook-as-job">Notebook as a Job</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Jobs<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/job-submission-feature">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/next/job-artifact-feature">Artifacts</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tutorial</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/job-submission-tutorial-simple">Simple Example</a></li><li class="navListItem"><a class="navItem" href="/docs/next/job-submission-tutorial-p1">(Part1) MNIST classifier training</a></li><li class="navListItem"><a class="navItem" href="/docs/next/job-submission-tutorial-p2">(Part2) MNIST classifier training</a></li><li class="navListItem"><a class="navItem" href="/docs/next/job-submission-tutorial-p3">(Advanced) Use Job Submission to Tune Hyperparameters</a></li><li class="navListItem"><a class="navItem" href="/docs/next/job-submission-tutorial-p4">(Advanced) Model Serving by Seldon</a></li><li class="navListItem"><a class="navItem" href="/docs/next/job-artifacts-simple">Job Artifacts Simple Usecase</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Schedule<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/job-scheduling-feature">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Models<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/model-management">Overview (Beta)</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-configuration">Configuration</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tutorial</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/model-management-tutorial">Manage and Deploy a Model</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deployments<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-feature">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tutorials</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-tutorial-concepts">Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-tutorial-prepackaged-image">Deploy a Model by Pre-packaged Server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-tutorial-prepackaged-image-phfs">Deploy a Model by Pre-packaged Server (PHFS)</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-tutorial-model-image">Deploy a Model by Image built from Language Wrapper</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Pre-packaged servers</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prepackaged-server-intro">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prepackaged-server-tensorflow2">TensorFlow server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prepackaged-server-pytorch">PyTorch server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prepackaged-server-sklearn">SKLearn server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prepackaged-server-custom">Customize Pre-packaged Server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prepackaged-server-test">Run Pre-packaged Server Locally</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Package from Language Wrapper</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-language-wrapper-intro">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-language-wrapper-python">Package a Model Image for Python</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-language-wrapper-r">Package a Model Image for R</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-language-wrapper-reusable-base-image">Package a Model Image from a Reusable Base Image</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Advanced</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-prediction-apis">Prediction APIs</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model-deployment-model-uri">Model URI</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Shared Files<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/shared-files">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Apps<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app">Overview (Beta)</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tutorials</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-tutorial-template">Create Your Own App</a></li><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-tutorial-mlflow">Create an MLflow server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-tutorial-label-studio">Label Dataset by Label Studio</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Builtin Apps</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-builtin-code-server">Code Server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-builtin-label-studio">Label Studio</a></li><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-builtin-matlab">MATLAB</a></li><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-builtin-mlflow">MLflow</a></li><li class="navListItem"><a class="navItem" href="/docs/next/primehub-app-builtin-streamlit">Streamlit</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Group Administration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/group-image">Images</a></li><li class="navListItem"><a class="navItem" href="/docs/next/group-setting">Settings</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Admin Portal<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/login-portal-admin">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manage users and groups</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-user">User Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-group">Group Management</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manage Instance Type</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-instancetype">Instance Type Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/usecase-toleration">Toleration</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/usecase-nodeselector">NodeSelector</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-it-performance">Quality of Service for Pods</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manage and build images</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-image">Image Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-build-image">Image Builder</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/custom-image-guideline">Custom Image Guideline</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/images-list">Available Images List</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manage Datasets and Upload</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-dataset">Dataset Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-uploader">Upload Server</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manage and obtain secrets</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-secret">Secret Management</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Manage Notebook instances</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-nb-admin">Notebooks Admin</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Monthly Report</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-report">Usage Reports</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">System</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/admin-system">System Settings</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Maintenance tool kits</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/maintenance">Maintenance Notebook</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/maintenance-resize-user-vol">Increase User Volume</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/maintenance-resize-group-vol">Increase Group Volume</a></li><li class="navListItem"><a class="navItem" href="/docs/next/trouble/howto-check-user-vol">HOWTO - Check User Volume Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/next/trouble/howto-check-group-vol">HOWTO - Check Group Volume Usage</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Quick Start</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/create-user">Create User</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/create-group">Create Group</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/assign-group-admin">Assign Group Admin</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/add-instance-type">Create/Plan Instance Type</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/add-infuseai-image">Add InfuseAI Image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/add-image">Add Image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/build-image">Build Image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/secret-pull-image">Pull Secret for GitLab</a></li><li class="navListItem"><a class="navItem" href="/docs/next/quickstart/secret-gitsync">Gitsync Secret for GitHub</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">PrimeHub Deploy<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/deploy-index">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Admin Portal</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/model_deployment/md-admin-portal">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model_deployment/md-group">Group Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model_deployment/md-user">User Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model_deployment/md-instancetype">Instance Type Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model_deployment/md-secret">Secret Management</a></li><li class="navListItem"><a class="navItem" href="/docs/next/model_deployment/md-system">System Management</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Designs and Concepts<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Concepts</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/design/architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/data-model">Data Model</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/crds">CRDs</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/graphql">GraphQL</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/persistence-storage">Persistence Storages</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Designs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/design/admission">Admission</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/jupyterhub">JupyterHub</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/notebook-kernel-process">Notebook with kernel process</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/dataset-upload">Dataset Upload</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/image-builder">Image Builder</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/job-submission">Job Submission</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/job-scheduler">Job Scheduler</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/job-monitoring">Job Monitoring</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/install-helper-design">Install Helper</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/user-portal">User Portal</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/meta-chart">Meta Chart</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/model-deployment">Model Deployment</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/primehub-store">PrimeHub Store</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/log-persistence">Log Persistence</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/phfs">PrimeHub File System (PHFS)</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/usage">PrimeHub Usage</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/job-artifact">Job Artifact</a></li><li class="navListItem"><a class="navItem" href="/docs/next/design/primehub-apps">PrimeHub Apps</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/configure-primehub-store">PrimeHub Store</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/configure-ssh-server">SSH Server</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/configure-job-submission">Job Submission</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/configure-model-deployment">Model Deployment</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/configure-image-builder">Image Builder</a></li><li class="navListItem"><a class="navItem" href="/docs/next/getting_started/configure-self-signed-ca">Self-Signed Certificate</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tasks<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Jupyter Images</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/tasks/repo2docker">repo2docker image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/tasks/non-standard-image">Non standard image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/tasks/matlab-img">MATLAB Image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/tasks/spyder-image">Spyder Image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/tasks/rstudio-image">RStudio Image</a></li><li class="navListItem"><a class="navItem" href="/docs/next/tasks/ros-image">ROS Image</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/tasks/api-token">Generate API Token</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Monitoring</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/tasks/monitoring">Grafana PrimeHub Dashboard</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">MLflow</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/tasks/mlflow-compare">Compare MLflow Models</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/next/tasks/customize-job-runtime">Customize Runtime</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">References<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/references/primehub_chart">Chart Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/next/comparison">Tiers Feature Comparison</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/ssh-vscode">VSCode Remote-SSH</a></li><li class="navListItem"><a class="navItem" href="/docs/next/guide_manual/ssh-keygen">SSH Key Generation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Trouble Shooting<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/next/trouble-shoot-guide">Trouble-shooting Guide</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">JupyterHub</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/trouble/jh-blank-page">A blank JupyterHub</a></li><li class="navListItem"><a class="navItem" href="/docs/next/trouble/dataset-failure">Jupyter spawning fails due to mounting datasets</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Keycloak</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/trouble/kc-brute-force-detection">Brute force attack password</a></li><li class="navListItem"><a class="navItem" href="/docs/next/trouble/kc-password-policy">Password Policy</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">SSH Server</h4><ul><li class="navListItem"><a class="navItem" href="/docs/next/trouble/ssh-server-permission-denied">Permission Denied</a></li><li class="navListItem"><a class="navItem" href="/docs/next/trouble/ssh-server-connection-refused">Connection Refused</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/next/trouble/kubelet-restart">Restart Kubelet</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Using PrimeHub from Training to Serving the Model</h1></header><article><div><span><div class="label-sect">
  <div class="ee-only tooltip">Enterprise
    <span class="tooltiptext">Applicable to Enterprise Edition</span>
  </div>
</div>
<br>
<p>This tutorial shows how to construct the end-to-end machine learning project life cycle in PrimeHub.</p>
<p>We have prepared the dataset for you. The dataset contains three folders:</p>
<ol>
<li><code>train/good</code> contains the perfect screw</li>
<li><code>train/bad</code> contains the screw with some defects</li>
<li><code>unlabeled</code> contains the screw images that are not yet labeled as good or bad screw</li>
</ol>
<p>We will use the images in <code>train/good</code> and <code>train/bad</code> as the training dataset and use Label Studio to label the images in <code>unlabeled</code> as the validation dataset.</p>
<h2><a class="anchor" aria-hidden="true" id="what-we-need"></a><a href="#what-we-need" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What we need?</h2>
<ul>
<li>Create a <a href="guide_manual/admin-dataset">dataset</a> named <code>screw</code> with read/write permission to your group.</li>
<li>Configuration <a href="model-configuration">model management</a> in your group.</li>
<li>Enable <a href="model-deployment-feature">model deployment</a> in your group.</li>
<li>The notebook image <code>infuseai/docker-stacks:tensorflow-notebook-v2-4-1-dbdcead1</code>.</li>
<li>An instance type &gt;= minimal requirement (CPU=1, GPU=0, Mem=3G).</li>
<li>Please download the <a href="/docs/assets/tutorial_screw_dataset.zip">tutorial_screw_dataset.zip</a>, unload the zip file to the <code>~/datasets/screw</code> folder by the <a href="quickstart/launch-project">notebook</a>.</li>
</ul>
<p>Choose the notebook image and instance type based on <code>What we need?</code>. (If the notebook image or instance type is not existed, please request administrators for assistance.)</p>
<p>Please ignore the warning of large file size warning and upload the zip file. There will be a progress bar in the bottom.
<img src="/docs/assets/tutorial_upload_dataset_progress_bar.png" alt=""></p>
<p>After the file uploaded, open a terminal in the <code>notebook</code>.
<img src="/docs/assets/tutorial_notebook_open_terminal.png" alt=""></p>
<p>Type the following command:</p>
<pre><code class="hljs css language-bash"><span class="token builtin class-name">cd</span> ~/datasets/screw
<span class="token function">unzip</span> tutorial_screw_dataset.zip
<span class="token function">rm</span> tutorial_screw_dataset.zip
</code></pre>
<p>Now you can see there are folders <code>train/good</code>, <code>train/bad</code>, and <code>unlabeled</code> in <code>~/datasets/screw</code>.</p>
<p>Here are examples of good and bad screws. The first image is the good screw. The second image is the bad screw as you can see the there is a manipulated front.</p>
<p><img src="/docs/assets/app_tutorial_labelstudio_screw_good.png" alt="">
<img src="/docs/assets/app_tutorial_labelstudio_screw_bad.png" alt=""></p>
<h2><a class="anchor" aria-hidden="true" id="1-use-label-studio-to-label-unlabeled-data"></a><a href="#1-use-label-studio-to-label-unlabeled-data" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Use Label Studio to Label Unlabeled Data</h2>
<p>Install and login to the <a href="primehub-app-tutorial-label-studio">App</a> of Label Studio.</p>
<p>Please click <code>Create</code> button and enter your project name. Skip the <code>Data Import</code> step and choose the <code>Labeling Setup</code>. Here we choose <code>Image Classification</code>.
<img src="/docs/assets/app_tutorial_labelstudio_create.png" alt=""></p>
<p>Delete the original choices and add our own label classes: <code>good</code>, <code>bad</code>, then save it to create the proeject.
<img src="/docs/assets/app_tutorial_labelstudio_screw_label_classes.png" alt=""></p>
<p>Go to <code>Settings -&gt; Cloud Storage</code> to setup source and target storage.</p>
<p><code>Add Source Storage</code> with following settings:</p>
<ul>
<li>Stroage Type: <code>Local files</code></li>
<li>Absolute local path: <code>/datasets/screw/unlabeled</code></li>
<li>File Filter Regex: <code>.*png</code></li>
<li>Turn on toggle of <code>Treat every bucket object as a source file</code>.</li>
</ul>
<p>After added, click <code>Sync Storage</code>.</p>
<p><code>Add Target Storage</code> with following settings:</p>
<ul>
<li>Stroage Type: <code>Local files</code></li>
<li>Absolute local path: <code>/project/&lt;group_name&gt;/screw-labeled</code></li>
</ul>
<p>The labeled results will be synced to the local path.</p>
<p>Back to the project in Label Studio. The images in the dataset has been shown and you can click <code>Label</code> to start labeling. (Tip: you can type keyboard numbers to select the class)
<img src="/docs/assets/app_tutorial_labelstudio_screw_label_start.png" alt=""></p>
<blockquote>
<p>After you labeled all images, you may see the following message. This is a known issue. Please click <code>OK</code>, click your project name and refresh the page.
<img src="/docs/assets/app_tutorial_labelstudio_screw_label_completed.png" alt=""></p>
</blockquote>
<p>Now you have labeled all data by the label studio. We can go back to our <a href="quickstart/launch-project">notebook</a> to train the model.</p>
<h2><a class="anchor" aria-hidden="true" id="2-train-the-model"></a><a href="#2-train-the-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Train the Model</h2>
<p>Please download the notebook file <a href="/docs/assets/tutorial_screw_train.ipynb">tutorial_screw_train.ipynb</a>, which trains a model to classify the good or bad screw. Then, go to PrimeHub <a href="quickstart/launch-project">notebook</a>, upload it to <code>~/&lt;group_name&gt;/screw-train</code> based on the similar steps of uploading the zip file in <code>What we need?</code>.</p>
<p>There is one cell need to be modified in the notebook file. In the second code cell, please replace the <code>&lt;group_name&gt;</code> with your group name. <code>dir_path</code> is the target storage of the labeled results that we labeled in the previous step. We use these new labeled data as the validation dataset.</p>
<p>After modified that cell, you can run all cells in the notebook. It uses the mobilenet as the pre-trained model and uses it's outputted feature vector to classify the screw quality.</p>
<p>We can see that we achieve around 90% of accuracy both in training and the validation dataset after training.</p>
<h2><a class="anchor" aria-hidden="true" id="3-send-notebook-as-job-for-parameter-tuning"></a><a href="#3-send-notebook-as-job-for-parameter-tuning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Send Notebook as Job for Parameter Tuning</h2>
<p>Now, we have a runnable notebook to train the screw classification model.</p>
<p>Next, we can access <a href="ph-notebook-extension">PrimeHub Notebook Extension</a> to submit our notebook as job to perform parameters tuning.</p>
<p>Let's configure the learning rate to see how model accuracy can be better!</p>
<p>Click on the <code>cell 18</code> with default <code>base_learning_rate</code> configured.
<img src="/docs/assets/tutorial_notebook_learning_rate.png" alt=""></p>
<p>Click on <code>Property Inspector</code> button.
<img src="/docs/assets/tutorial_notebook_property_inspector.png" alt=""></p>
<p>Click on <code>Add Tag</code>, fill in <code>parameters</code>, and click on <code>+</code> icon. This makes the feed parameters to overwrite the <code>base_learning_rate</code>.
<img src="/docs/assets/tutorial_notebook_property_inspector_parameters.png" alt=""></p>
<p>Click on PrimeHub button to expand extension menu, we need to setup <a href="tasks/api-token">API Token</a> at first.
<img src="/docs/assets/tutorial_notebook_extension_api.png" alt=""></p>
<p>Back to PrimeHub UI, select <code>API Token</code> from the top-right menu.
<img src="/docs/assets/tutorial_api_token.png" alt=""></p>
<p>Click on <code>Request API Token</code> button.
<img src="/docs/assets/tutorial_request_api_token.png" alt=""></p>
<p>After the API token displayed, click on <code>Copy</code> to store our token value.
<img src="/docs/assets/tutorial_copy_api_token.png" alt=""></p>
<p>Back to notebooks, click on PrimeHub button and select <code>API Token</code>.
<img src="/docs/assets/tutorial_notebook_extension_api.png" alt=""></p>
<p>We can paste our token here then click on <code>OK</code> button.
<img src="/docs/assets/tutorial_notebook_extension_paste_api_token.png" alt=""></p>
<p>Next, click on PrimeHub button and select <code>Submit Notebook as Job</code>.</p>
<p>In the pop-up dialog, we can adjust instance type to gain more running resources, or we can adjust image to make notebook execution on different environment. Here is the settings:</p>
<ul>
<li>Instance Type: default value</li>
<li>Image: default value</li>
<li>Job Name: <code>tf-screw-training-lr-0.01</code>.</li>
<li>Notebook Parameters: <code>base_learning_rate = 0.01</code></li>
</ul>
<p>Click on <code>Submit</code> to start training with <code>base_learning_rate = 0.01</code>.
<img src="/docs/assets/tutorial_submit_job_lr_0.01.png" alt=""></p>
<p>Again, click on PrimeHub button and select <code>Submit Notebook as Job</code>. Let's submit another training with <code>base_learning_rate = 0.05</code> with following settings:</p>
<ul>
<li>Instance Type: default value</li>
<li>Image: default value</li>
<li>Job Name: <code>tf-screw-training-lr-0.05</code>.</li>
<li>Notebook Parameters: <code>base_learning_rate = 0.05</code></li>
</ul>
<p><img src="/docs/assets/tutorial_submit_job_lr_0.05.png" alt=""></p>
<p>Back to PrimeHub UI, select <code>Jobs</code> page to check our two submitted jobs are succeeded now!
<img src="/docs/assets/tutorial_jobs_succeeded.png" alt=""></p>
<h2><a class="anchor" aria-hidden="true" id="4-model-management-choose-best-model"></a><a href="#4-model-management-choose-best-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Model Management (Choose Best Model)</h2>
<p>With the <code>Submit Notebook as Job</code> feature, we can set multiple variables combination to fine-tune our model.</p>
<p>After all submitted jobs completed, we now select <a href="model-management">Models</a> in PrimeHub UI.</p>
<p>In the <code>Models</code> page, click on the <code>MLflow UI</code> button.
<img src="/docs/assets/tutorial_models_mlflow_ui.png" alt=""></p>
<p>In the MLflow UI, switch to <code>Experiments</code> tab.
<img src="/docs/assets/tutorial_mlflow_experiments.png" alt=""></p>
<p>Select our specified experiment name <code>tutorial_screw_train</code>.
<img src="/docs/assets/tutorial_mlflow_experiment_selected.png" alt=""></p>
<p>It shows all runs in <code>tutorial_screw_train</code> experiment, now check our two executed run and click on <code>Compare</code> button.
<img src="/docs/assets/tutorial_mlflow_experiment_compare.png" alt=""></p>
<p>We will be directed to page that comparing 2 runs' parameters and metrics. We analyzed these 2 runs and found the <code>base_learning_rate=0.01</code> can perform better results.
<img src="/docs/assets/tutorial_mlflow_experiment_compare_result.png" alt=""></p>
<p>Thus, we click on its Run ID: <code>b353b109a79b4ba0ab4dadc3da4a1b03</code>.
<img src="/docs/assets/tutorial_mlflow_experiment_click_run_id.png" alt=""></p>
<p>Both parameters, metrics, and artifacts of this run can be found in this page.
<img src="/docs/assets/tutorial_mlflow_run.png" alt=""></p>
<p>Scroll down to the artifacts section. Click on the <code>exported model</code> and <code>Register Model</code> button.
<img src="/docs/assets/tutorial_mlflow_run_register_model.png" alt=""></p>
<p>In the model selector, choose <code>Create New Model</code>.
<img src="/docs/assets/tutorial_mlflow_create_new_model.png" alt=""></p>
<p>Fill in model name with <code>tf-screw-model</code> and click on <code>Register</code> button.
<img src="/docs/assets/tutorial_mlflow_fill_model_name.png" alt=""></p>
<p>We can see our model is successfully registered as <code>version 1</code>.
<img src="/docs/assets/tutorial_mlflow_registered_v1.png" alt=""></p>
<p>Back and refresh the models page in the PrimeHub UI, now we can see our model <code>tf-screw-model</code> is managed in model list.
<img src="/docs/assets/tutorial_models_managed.png" alt=""></p>
<h2><a class="anchor" aria-hidden="true" id="5-customize-model-server-image"></a><a href="#5-customize-model-server-image" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Customize Model Server Image</h2>
<p>Now, we have registered current best model in Model Management. To deploy the managed model, we need to setup the pre-packaged model image to be runnable container environment.</p>
<p>Use the <a href="https://github.com/InfuseAI/primehub-seldon-servers/tree/master/tensorflow2">Tensorflow2 Prepackaged Model Server</a> as template of pre-packaged model image.</p>
<pre><code class="hljs css language-bash"><span class="token function">git</span> clone https://github.com/InfuseAI/primehub-seldon-servers.git
<span class="token builtin class-name">cd</span> tensorflow2/
</code></pre>
<p>We can edit <a href="https://github.com/InfuseAI/primehub-seldon-servers/blob/master/tensorflow2/tensorflow2/Model.py">tensorflow2/Model.py</a> to meet our input data requirements.</p>
<p>Original template</p>
<pre><code class="hljs css language-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">predict</span><span class="hljs-params">(self, X, feature_names = None, meta = None)</span>:</span>
    ...
    <span class="hljs-keyword">if</span> isinstance(X, bytes):
        img = Image.open(BytesIO(X))
        img = np.array(img).astype(np.float32)
        X = np.copy(img)
        X /= <span class="hljs-number">255.0</span>
        X = np.expand_dims(X, axis=<span class="hljs-number">0</span>)
    ...
</code></pre>
<p>Ours</p>
<pre><code class="hljs css language-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">predict</span><span class="hljs-params">(self, X, feature_names = None, meta = None)</span>:</span>
    ...
    <span class="hljs-keyword">if</span> isinstance(X, bytes):
        img = Image.open(BytesIO(X))
        img = np.array(img).astype(np.float32)
        img = np.stack((img,)*<span class="hljs-number">3</span>, axis=<span class="hljs-number">-1</span>)
        X = np.expand_dims(img, axis=<span class="hljs-number">0</span>)
    ...
</code></pre>
<p>The <code>np.stack((img,)*3, axis=-1)</code> can convert a grayscale input image to a 3-channel image, making it able to fit the shape of model input layer.</p>
<p>After edited the <code>Model.py</code>, let's execute following command to build the pre-packaged model image.</p>
<pre><code class="hljs css language-bash">docker build <span class="token builtin class-name">.</span> -t tensorflow2-prepackaged
</code></pre>
<p>Execute <code>docker images</code> to check the built image.</p>
<pre><code class="hljs css language-bash">REPOSITORY                TAG          IMAGE ID       CREATED        SIZE
tensorflow2-prepackaged   latest       689530dd1ef9   <span class="token number">3</span> minutes ago  <span class="token number">1</span>.67GB
</code></pre>
<p>Next, tag the built image based on your docker registries, we added <code>screw-classification</code> tag to this image and used <code>Docker Hub</code> to store image.</p>
<pre><code class="hljs css language-bash">docker tag tensorflow2-prepackaged:latest infuseai/tensorflow2-prepackaged:screw-classification
</code></pre>
<p>Then push to docker registry.</p>
<pre><code class="hljs css language-bash">docker push infuseai/tensorflow2-prepackaged:screw-classification
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="6-model-deployment"></a><a href="#6-model-deployment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Model Deployment</h2>
<p>Now, we have prepared the trained model in PrimeHub Model Management and pushed the customized pre-packaged model image to Docker Hub.</p>
<p>Let's continue to deploy our model!</p>
<p>Back to <code>Models</code> page, click on our managed model name <code>tf-screw-model</code>.
<img src="/docs/assets/tutorial_models_managed.png" alt=""></p>
<p>It shows all versions of <code>tf-screw-model</code>, let's click on the <code>Deploy</code> button of <code>Version 1</code>.
<img src="/docs/assets/tutorial_models_version.png" alt=""></p>
<p>In the deployment selector, choose the <code>Create new deployment</code> and click on <code>OK</code> button.
<img src="/docs/assets/tutorial_models_create_new_deployment.png" alt=""></p>
<p>We will be directed to <a href="model-deployment-feature#create">Create Deployment</a> page. And the <code>Model URI</code> field will be auto fill-in with registered model scheme (<code>models:/tf-screw-model/1</code>).
<img src="/docs/assets/tutorial_deployment_model_uri.png" alt=""></p>
<p>Next,</p>
<ol>
<li>Fill in deployment name with <code>tf-screw-deployment</code>.</li>
<li>Fill in model image with <code>infuseai/tensorflow2-prepackaged:screw-classification</code>; this is our customized pre-packaged model image that can serve the trained screw model.
<img src="/docs/assets/tutorial_deployment_name_model_image.png" alt=""></li>
</ol>
<p>Choose the instance type, the minimal requirements in this tutorial is <code>CPU: 0.5 / Memory: 1 G / GPU: 0</code>.
<img src="/docs/assets/mdeploy_quickstart_deployresource.png" alt=""></p>
<p>Then, click on <code>Deploy</code> button.</p>
<p>Our model is deploying, let's click on the <code>tf-screw-deployment</code> cell.
<img src="/docs/assets/tutorial_deployment_cell.png" alt=""></p>
<p>In the <a href="model-deployment-feature#deployment-detail">deployment detail</a> page, we can see the status is <code>Deploying</code>.
<img src="/docs/assets/tutorial_deployment_deploying.png" alt=""></p>
<p>Wait for a while and our model is <code>Deployed</code> now!</p>
<p>We can view some detailed information, now let's copy the value of <code>Endpoint</code> (<code>https://.../predictions</code>) to test our deployed model!
<img src="/docs/assets/tutorial_deployment_deployed.png" alt=""></p>
<p>Replace <code>${YOUR_ENDPOINT_URL}</code> with your <code>Endpoint</code> value in the following block.</p>
<pre><code class="hljs css language-bash"><span class="token function">curl</span> -F <span class="token string">'binData=@path/to/image'</span> <span class="token variable">${YOUR_ENDPOINT_URL}</span>
</code></pre>
<p>Then copy the entire block to the terminal for execution, and we are sending exact image as request data.</p>
<ul>
<li><p>Example of request data</p>
<pre><code class="hljs css language-bash"><span class="token function">curl</span> -F <span class="token string">'binData=@val/good/000.png'</span> https://xxx.primehub.io/deployment/tf-screw-deployment-xxxxx/api/v1.0/predictions
</code></pre>
<p><img src="/docs/assets/tutorial_good_screw.png" alt=""></p></li>
<li><p>Example of response data</p>
<pre><code class="hljs css language-bash"><span class="token punctuation">{</span><span class="token string">"data"</span>:<span class="token punctuation">{</span><span class="token string">"names"</span>:<span class="token punctuation">[</span><span class="token string">"t:0"</span><span class="token punctuation">]</span>,<span class="token string">"tensor"</span>:<span class="token punctuation">{</span><span class="token string">"shape"</span>:<span class="token punctuation">[</span><span class="token number">1,1</span><span class="token punctuation">]</span>,<span class="token string">"values"</span>:<span class="token punctuation">[</span><span class="token number">2.065972089767456</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token string">"meta"</span>:<span class="token punctuation">{</span><span class="token string">"requestPath"</span>:<span class="token punctuation">{</span><span class="token string">"model"</span><span class="token builtin class-name">:</span><span class="token string">"infuseai/tensorflow2-prepackaged:screw-classification"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
<p>The <code>positive</code> return value represented as <code>good</code> screw; and the <code>negative</code> return value represented as <code>bad</code> screw.</p>
<p>Therefore, the return value <code>2.065972089767456</code> indicated that the requested screw image is a good screw!</p></li>
</ul>
<p>Congratulations! We have trained the model in Notebooks, fine-tuned the model in Jobs, versioned the trained model in Model Management, and further deploy it as an endpoint service in Model Deployment. Making it able to respond to requests anytime from everywhere.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/next/quickstart/login-portal-user"><span class="arrow-prev">← </span><span>User Portal</span></a><a class="docs-next button" href="/docs/next/dev-introduction"><span>Overview</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#what-we-need">What we need?</a></li><li><a href="#1-use-label-studio-to-label-unlabeled-data">1. Use Label Studio to Label Unlabeled Data</a></li><li><a href="#2-train-the-model">2. Train the Model</a></li><li><a href="#3-send-notebook-as-job-for-parameter-tuning">3. Send Notebook as Job for Parameter Tuning</a></li><li><a href="#4-model-management-choose-best-model">4. Model Management (Choose Best Model)</a></li><li><a href="#5-customize-model-server-image">5. Customize Model Server Image</a></li><li><a href="#6-model-deployment">6. Model Deployment</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/PrimeHub_icon_128.png" alt="PrimeHub" width="66" height="58"/></a><div><h5></h5><a href="https://github.com/infuseai">GitHub</a><a href="https://medium.com/infuseai">Medium</a><a href="https://www.facebook.com/InfuseAI">Facebook</a><a href="https://www.katacoda.com/infuseai">Katacoda</a></div><div><h5>More</h5><a href="https://infuseai.io">About InfuseAI</a><a href="/docs/comparison">Community | Enterprise | Deploy</a><a href="https://docs.google.com/forms/d/e/1FAIpQLSe_Z8JfIbYnvhOampGN_XXle4d3GVX04E8evnNI_Py3abth-A/viewform">Request Trial</a></div></section><section class="copyright">Copyright © 2021 InfuseAI</section></footer></div></body></html>